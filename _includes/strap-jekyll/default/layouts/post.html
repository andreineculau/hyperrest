{% include strap-jekyll/default/vars.html %}

<div id="post">
  <div class="page-header">
    <h1>
      {{ page.title }}
      {% if page.date %}
        <small class="post-date">{{ page.date | date_to_string }}</small>
      {% endif %}
    </h1>
  </div>

  <div class="post-meta">
    {% capture category_size %}{{ page.categories | size }}{% endcapture %}
    {% if category_size != '0' %}
      <div class="post-categories">
        <span>{{ text.categories }}</span>
        <div class="btn-group">
        {% for category in page.categories %}
          {% capture category_size %}{{ site.categories[category] | size }}{% endcapture %}
            {% if category_size == '0' or category_size == '1' %}
              <button class="btn btn-mini btn-inverse">
                {{ category }}
              </button>
            {% else %}
              <button class="btn btn-mini btn-inverse dropdown-toggle" data-toggle="dropdown">
                {{ category }}
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu">
                {% for post_in_category in site.categories[category] %}
                  {% if post_in_category.url != page.url %}
                    <li><a href="{{ site.base_url }}{{ post_in_category.url }}">{{ post_in_category.title }}</a></li>
                  {% endif %}
                {% endfor %}
              </ul>
            {% endif %}
        {% endfor %}
        </div>
      </div>
    {% endif %}
    {% capture tag_size %}{{ page.tags | size }}{% endcapture %}
    {% if tag_size != '0' %}
      <div class="post-tags">
        <span>{{ text.tags }}</span>
        <div class="btn-group">
        {% for tag in page.tags %}
          {% capture tag_size %}{{ site.tags[tag] | size }}{% endcapture %}
            {% if tag_size == '0' or tag_size == '1' %}
              <button class="btn btn-mini">
                {{ tag }}
              </button>
            {% else %}
              <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown">
                {{ tag }}
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu">
                {% for post_in_tag in site.tags[tag] %}
                  {% if post_in_tag.url != page.url %}
                    <li><a href="{{ site.base_url }}{{ post_in_tag.url }}">{{ post_in_tag.title }}</a></li>
                  {% endif %}
                {% endfor %}
              </ul>
            {% endif %}
        {% endfor %}
        </div>
      </div>
    {% endif %}
  </div>

  {{ content }}

  {% if page_comments_enabled == true %}
    <h2 id="comments">{{ text.comments }}</h2>
    {% include strap-jekyll/default/content-comments.html %}
  {% endif %}

</div>


<!--<script type="text/javascript">
  $("#post p,#post li").each( function(index) {
    if (index > 0 && $.trim($(this).text()).length > 0) {
      $(this).attr("id", "par" + index.toString());
      var html = $(this).html();
      $(this).html(html + " <a href='#par" + index.toString() + "'>#</a>");
    }
  });
</script>
-->
